(function(f){function n(){if(f.fn.ajaxSubmit.debug){var d="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(d);else window.opera&&window.opera.postError&&window.opera.postError(d)}}f.fn.ajaxSubmit=function(d){function k(v){function C(x){return x.contentWindow?x.contentWindow.document:x.contentDocument?x.contentDocument:x.document}function D(){function x(){try{var Q=C(s).readyState;n("state = "+Q);Q.toLowerCase()=="uninitialized"&&setTimeout(x,
50)}catch(R){n("Server abort: ",R," (",R.name,")");B(O);H&&clearTimeout(H);H=undefined}}var F=l.attr("target"),K=l.attr("action");E.setAttribute("target",j);g||E.setAttribute("method","POST");K!=b.url&&E.setAttribute("action",b.url);if(!b.skipEncodingOverride&&(!g||/post/i.test(g)))l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});if(b.timeout)H=setTimeout(function(){I=true;B(J)},b.timeout);var N=[];try{if(b.extraData)for(var M in b.extraData)N.push(f('<input type="hidden" name="'+
M+'" />').attr("value",b.extraData[M]).appendTo(E)[0]);if(!b.iframeTarget){o.appendTo("body");s.attachEvent?s.attachEvent("onload",B):s.addEventListener("load",B,false)}setTimeout(x,15);E.submit()}finally{E.setAttribute("action",K);F?E.setAttribute("target",F):l.removeAttr("target");f(N).remove()}}function B(x){if(!(r.aborted||i)){try{c=C(s)}catch(F){n("cannot access response document: ",F);x=O}if(x===J&&r)r.abort("timeout");else if(x==O&&r)r.abort("server abort");else{if(!c||c.location.href==b.iframeSrc)if(!I)return;
s.detachEvent?s.detachEvent("onload",B):s.removeEventListener("load",B,false);x="success";var K;try{if(I)throw"timeout";var N=b.dataType=="xml"||c.XMLDocument||f.isXMLDoc(c);n("isXml="+N);if(!N&&window.opera&&(c.body==null||c.body.innerHTML==""))if(--e){n("requeing onLoad callback, DOM not available");setTimeout(B,250);return}var M=c.body?c.body:c.documentElement;r.responseText=M?M.innerHTML:null;r.responseXML=c.XMLDocument?c.XMLDocument:c;if(N)b.dataType="xml";r.getResponseHeader=function(X){return{"content-type":b.dataType}[X]};
if(M){r.status=Number(M.getAttribute("status"))||r.status;r.statusText=M.getAttribute("statusText")||r.statusText}var Q=(b.dataType||"").toLowerCase(),R=/(json|script|text)/.test(Q);if(R||b.textarea){var S=c.getElementsByTagName("textarea")[0];if(S){r.responseText=S.value;r.status=Number(S.getAttribute("status"))||r.status;r.statusText=S.getAttribute("statusText")||r.statusText}else if(R){var T=c.getElementsByTagName("pre")[0],U=c.getElementsByTagName("body")[0];if(T)r.responseText=T.textContent?
T.textContent:T.innerText;else if(U)r.responseText=U.textContent?U.textContent:U.innerText}}else if(Q=="xml"&&!r.responseXML&&r.responseText!=null)r.responseXML=m(r.responseText);try{V=z(r,Q,b)}catch(Y){x="parsererror";r.error=K=Y||x}}catch(W){n("error caught: ",W);x="error";r.error=K=W||x}if(r.aborted){n("upload aborted");x=null}if(r.status)x=r.status>=200&&r.status<300||r.status===304?"success":"error";if(x==="success"){b.success&&b.success.call(b.context,V,"success",r);a&&f.event.trigger("ajaxSuccess",
[r,b])}else if(x){if(K==undefined)K=r.statusText;b.error&&b.error.call(b.context,r,x,K);a&&f.event.trigger("ajaxError",[r,b,K])}a&&f.event.trigger("ajaxComplete",[r,b]);a&&!--f.active&&f.event.trigger("ajaxStop");b.complete&&b.complete.call(b.context,r,x);i=true;b.timeout&&clearTimeout(H);setTimeout(function(){b.iframeTarget||o.remove();r.responseXML=null},100)}}}var E=l[0],G,L,b,a,j,o,s,r,I,H;G=!!f.fn.prop;if(v)if(G)for(L=0;L<v.length;L++){G=f(E[v[L].name]);G.prop("disabled",false)}else for(L=0;L<
v.length;L++){G=f(E[v[L].name]);G.removeAttr("disabled")}if(f(":input[name=submit],:input[id=submit]",E).length)alert('Error: Form elements must not have name or id of "submit".');else{b=f.extend(true,{},f.ajaxSettings,d);b.context=b.context||b;j="jqFormIO"+(new Date).getTime();if(b.iframeTarget){o=f(b.iframeTarget);G=o.attr("name");if(G==null)o.attr("name",j);else j=G}else{o=f('<iframe name="'+j+'" src="'+b.iframeSrc+'" />');o.css({position:"absolute",top:"-1000px",left:"-1000px"})}s=o[0];r={aborted:0,
responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(x){var F=x==="timeout"?"timeout":"aborted";n("aborting upload... "+F);this.aborted=1;o.attr("src",b.iframeSrc);r.error=F;b.error&&b.error.call(b.context,r,F,x);a&&f.event.trigger("ajaxError",[r,b,F]);b.complete&&b.complete.call(b.context,r,F)}};(a=b.global)&&!f.active++&&f.event.trigger("ajaxStart");a&&f.event.trigger("ajaxSend",
[r,b]);if(b.beforeSend&&b.beforeSend.call(b.context,r,b)===false)b.global&&f.active--;else if(!r.aborted){if(v=E.clk)if((G=v.name)&&!v.disabled){b.extraData=b.extraData||{};b.extraData[G]=v.value;if(v.type=="image"){b.extraData[G+".x"]=E.clk_x;b.extraData[G+".y"]=E.clk_y}}var J=1,O=2;b.forceSync?D():setTimeout(D,10);var V,c,e=50,i,m=f.parseXML||function(x,F){if(window.ActiveXObject){F=new ActiveXObject("Microsoft.XMLDOM");F.async="false";F.loadXML(x)}else F=(new DOMParser).parseFromString(x,"text/xml");
return F&&F.documentElement&&F.documentElement.nodeName!="parsererror"?F:null},t=f.parseJSON||function(x){return window.eval("("+x+")")},z=function(x,F,K){var N=x.getResponseHeader("content-type")||"",M=F==="xml"||!F&&N.indexOf("xml")>=0;x=M?x.responseXML:x.responseText;M&&x.documentElement.nodeName==="parsererror"&&f.error&&f.error("parsererror");if(K&&K.dataFilter)x=K.dataFilter(x,F);if(typeof x==="string")if(F==="json"||!F&&N.indexOf("json")>=0)x=t(x);else if(F==="script"||!F&&N.indexOf("javascript")>=
0)f.globalEval(x);return x}}}}if(!this.length){n("ajaxSubmit: skipping submit process - no element selected");return this}var g,h,l=this;if(typeof d=="function")d={success:d};g=this.attr("method");h=this.attr("action");if(h=(h=typeof h==="string"?f.trim(h):"")||window.location.href||"")h=(h.match(/^([^#]+)/)||[])[1];d=f.extend(true,{url:h,success:f.ajaxSettings.success,type:g||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);h={};this.trigger("form-pre-serialize",
[this,d,h]);if(h.veto){n("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(d.beforeSerialize&&d.beforeSerialize(this,d)===false){n("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var q,y,A=this.formToArray(d.semantic);if(d.data){d.extraData=d.data;for(q in d.data)if(f.isArray(d.data[q]))for(var p in d.data[q])A.push({name:q,value:d.data[q][p]});else{y=d.data[q];y=f.isFunction(y)?y():y;A.push({name:q,value:y})}}if(d.beforeSubmit&&d.beforeSubmit(A,this,
d)===false){n("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[A,this,d,h]);if(h.veto){n("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}q=f.param(A);if(d.type.toUpperCase()=="GET"){d.url+=(d.url.indexOf("?")>=0?"&":"?")+q;d.data=null}else d.data=q;var u=[];d.resetForm&&u.push(function(){l.resetForm()});d.clearForm&&u.push(function(){l.clearForm()});if(!d.dataType&&d.target){var w=d.success||function(){};u.push(function(v){var C=
d.replaceTarget?"replaceWith":"html";f(d.target)[C](v).each(w,arguments)})}else d.success&&u.push(d.success);d.success=function(v,C,D){for(var B=d.context||d,E=0,G=u.length;E<G;E++)u[E].apply(B,[v,C,D||l,l])};q=f("input:file",this).length>0;p=l.attr("enctype")=="multipart/form-data"||l.attr("encoding")=="multipart/form-data";if(d.iframe!==false&&(q||d.iframe||p))d.closeKeepAlive?f.get(d.closeKeepAlive,function(){k(A)}):k(A);else{if(f.browser.msie&&g=="get"&&typeof d.type==="undefined"){q=l[0].getAttribute("method");
if(typeof q==="string")d.type=q}f.ajax(d)}this.trigger("form-submit-notify",[this,d]);return this};f.fn.ajaxForm=function(d){if(this.length===0){var k={s:this.selector,c:this.context};if(!f.isReady&&k.s){n("DOM not ready, queuing ajaxForm");f(function(){f(k.s,k.c).ajaxForm(d)});return this}n("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(g){if(!g.isDefaultPrevented()){g.preventDefault();
f(this).ajaxSubmit(d)}}).bind("click.form-plugin",function(g){var h=g.target,l=f(h);if(!l.is(":submit,input:image")){h=l.closest(":submit");if(h.length==0)return;h=h[0]}var q=this;q.clk=h;if(h.type=="image")if(g.offsetX!=undefined){q.clk_x=g.offsetX;q.clk_y=g.offsetY}else if(typeof f.fn.offset=="function"){l=l.offset();q.clk_x=g.pageX-l.left;q.clk_y=g.pageY-l.top}else{q.clk_x=g.pageX-h.offsetLeft;q.clk_y=g.pageY-h.offsetTop}setTimeout(function(){q.clk=q.clk_x=q.clk_y=null},100)})};f.fn.ajaxFormUnbind=
function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(d){var k=[];if(this.length===0)return k;var g=this[0],h=d?g.getElementsByTagName("*"):g.elements;if(!h)return k;var l,q,y,A,p,u;l=0;for(p=h.length;l<p;l++){q=h[l];if(y=q.name)if(d&&g.clk&&q.type=="image"){if(!q.disabled&&g.clk==q){k.push({name:y,value:f(q).val()});k.push({name:y+".x",value:g.clk_x},{name:y+".y",value:g.clk_y})}}else if((A=f.fieldValue(q,true))&&A.constructor==Array){q=0;for(u=A.length;q<
u;q++)k.push({name:y,value:A[q]})}else A!==null&&typeof A!="undefined"&&k.push({name:y,value:A})}if(!d&&g.clk){d=f(g.clk);h=d[0];if((y=h.name)&&!h.disabled&&h.type=="image"){k.push({name:y,value:d.val()});k.push({name:y+".x",value:g.clk_x},{name:y+".y",value:g.clk_y})}}return k};f.fn.formSerialize=function(d){return f.param(this.formToArray(d))};f.fn.fieldSerialize=function(d){var k=[];this.each(function(){var g=this.name;if(g){var h=f.fieldValue(this,d);if(h&&h.constructor==Array)for(var l=0,q=h.length;l<
q;l++)k.push({name:g,value:h[l]});else h!==null&&typeof h!="undefined"&&k.push({name:this.name,value:h})}});return f.param(k)};f.fn.fieldValue=function(d){for(var k=[],g=0,h=this.length;g<h;g++){var l=f.fieldValue(this[g],d);l===null||typeof l=="undefined"||l.constructor==Array&&!l.length||(l.constructor==Array?f.merge(k,l):k.push(l))}return k};f.fieldValue=function(d,k){var g=d.name,h=d.type,l=d.tagName.toLowerCase();if(k===undefined)k=true;if(k&&(!g||d.disabled||h=="reset"||h=="button"||(h=="checkbox"||
h=="radio")&&!d.checked||(h=="submit"||h=="image")&&d.form&&d.form.clk!=d||l=="select"&&d.selectedIndex==-1))return null;if(l=="select"){l=d.selectedIndex;if(l<0)return null;k=[];d=d.options;g=(h=h=="select-one")?l+1:d.length;for(l=h?l:0;l<g;l++){var q=d[l];if(q.selected){var y=q.value;y||(y=q.attributes&&q.attributes.value&&!q.attributes.value.specified?q.text:q.value);if(h)return y;k.push(y)}}return k}return f(d).val()};f.fn.clearForm=function(){return this.each(function(){f("input,select,textarea",
this).clearFields()})};f.fn.clearFields=f.fn.clearInputs=function(){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var k=this.type,g=this.tagName.toLowerCase();if(d.test(k)||g=="textarea")this.value="";else if(k=="checkbox"||k=="radio")this.checked=false;else if(g=="select")this.selectedIndex=-1})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};
f.fn.enable=function(d){if(d===undefined)d=true;return this.each(function(){this.disabled=!d})};f.fn.selected=function(d){if(d===undefined)d=true;return this.each(function(){var k=this.type;if(k=="checkbox"||k=="radio")this.checked=d;else if(this.tagName.toLowerCase()=="option"){k=f(this).parent("select");d&&k[0]&&k[0].type=="select-one"&&k.find("option").selected(false);this.selected=d}})};f.fn.ajaxSubmit.debug=false})(window.jQuery||window.Zepto);(function(f,n,d){function k(p){var u={},w=/^jQuery\d+$/;d.each(p.attributes,function(v,C){if(C.specified&&!w.test(C.name))u[C.name]=C.value});return u}function g(p,u){var w=this,v=d(w);if(w.value==v.attr("placeholder")&&v.hasClass("placeholder"))if(v.data("placeholder-password")){v=v.hide().next().show().attr("id",v.removeAttr("id").data("placeholder-id"));if(p===true)return v[0].value=u;v.focus()}else{w.value="";v.removeClass("placeholder");w==n.activeElement&&w.select()}}function h(){var p,u=this,
w=d(u),v=this.id;if(u.value==""){if(u.type=="password"){if(!w.data("placeholder-textinput")){try{p=w.clone().attr({type:"text"})}catch(C){p=d("<input>").attr(d.extend(k(this),{type:"text"}))}p.removeAttr("name").data({"placeholder-password":true,"placeholder-id":v}).bind("focus.placeholder",g);w.data({"placeholder-textinput":p,"placeholder-id":v}).before(p)}w=w.removeAttr("id").hide().prev().attr("id",v).show()}w.addClass("placeholder");w[0].value=w.attr("placeholder")}else w.removeClass("placeholder")}
var l="placeholder"in n.createElement("input"),q="placeholder"in n.createElement("textarea"),y=d.fn,A=d.valHooks;if(l&&q){y=y.placeholder=function(){return this};y.input=y.textarea=true}else{y=y.placeholder=function(){var p=this;p.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":g,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};y.input=l;y.textarea=q;y={get:function(p){var u=d(p);return u.data("placeholder-enabled")&&
u.hasClass("placeholder")?"":p.value},set:function(p,u){var w=d(p);if(!w.data("placeholder-enabled"))return p.value=u;if(u==""){p.value=u;p!=n.activeElement&&h.call(p)}else if(w.hasClass("placeholder"))g.call(p,true,u)||(p.value=u);else p.value=u;return w}};l||(A.input=y);q||(A.textarea=y);d(function(){d(n).delegate("form","submit.placeholder",function(){var p=d(".placeholder",this).each(g);setTimeout(function(){p.each(h)},10)})});d(f).bind("beforeunload.placeholder",function(){d(".placeholder").each(function(){this.value=
""})})}})(this,document,window.jQuery||window.Zepto);$(function(){$("input, textarea").placeholder()});(function(){function f(c,e,i){if(c===e)return c!==0||1/c==1/e;if(c==null||e==null)return c===e;if(c._chain)c=c._wrapped;if(e._chain)e=e._wrapped;if(c.isEqual&&a.isFunction(c.isEqual))return c.isEqual(e);if(e.isEqual&&a.isFunction(e.isEqual))return e.isEqual(c);var m=y.call(c);if(m!=y.call(e))return false;switch(m){case "[object String]":return c==String(e);case "[object Number]":return c!=+c?e!=+e:c==0?1/c==1/e:c==+e;case "[object Date]":case "[object Boolean]":return+c==+e;case "[object RegExp]":return c.source==
e.source&&c.global==e.global&&c.multiline==e.multiline&&c.ignoreCase==e.ignoreCase}if(typeof c!="object"||typeof e!="object")return false;for(var t=i.length;t--;)if(i[t]==c)return true;i.push(c);t=0;var z=true;if(m=="[object Array]"){t=c.length;if(z=t==e.length)for(;t--;)if(!(z=t in c==t in e&&f(c[t],e[t],i)))break}else{if("constructor"in c!="constructor"in e||c.constructor!=e.constructor)return false;for(var x in c)if(a.has(c,x)){t++;if(!(z=a.has(e,x)&&f(c[x],e[x],i)))break}if(z){for(x in e)if(a.has(e,
x)&&!t--)break;z=!t}}i.pop();return z}var n=this,d=n._,k={},g=Array.prototype,h=Object.prototype,l=g.slice,q=g.unshift,y=h.toString,A=h.hasOwnProperty,p=g.forEach,u=g.map,w=g.reduce,v=g.reduceRight,C=g.filter,D=g.every,B=g.some,E=g.indexOf,G=g.lastIndexOf;h=Array.isArray;var L=Object.keys,b=Function.prototype.bind,a=function(c){return new J(c)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=a;exports._=a}else n._=a;a.VERSION="1.3.1";var j=a.each=
a.forEach=function(c,e,i){if(c!=null)if(p&&c.forEach===p)c.forEach(e,i);else if(c.length===+c.length)for(var m=0,t=c.length;m<t;m++){if(m in c&&e.call(i,c[m],m,c)===k)return}else for(m in c)if(a.has(c,m))if(e.call(i,c[m],m,c)===k)return};a.map=a.collect=function(c,e,i){var m=[];if(c==null)return m;if(u&&c.map===u)return c.map(e,i);j(c,function(t,z,x){m[m.length]=e.call(i,t,z,x)});if(c.length===+c.length)m.length=c.length;return m};a.reduce=a.foldl=a.inject=function(c,e,i,m){var t=arguments.length>
2;if(c==null)c=[];if(w&&c.reduce===w){if(m)e=a.bind(e,m);return t?c.reduce(e,i):c.reduce(e)}j(c,function(z,x,F){if(t)i=e.call(m,i,z,x,F);else{i=z;t=true}});if(!t)throw new TypeError("Reduce of empty array with no initial value");return i};a.reduceRight=a.foldr=function(c,e,i,m){var t=arguments.length>2;if(c==null)c=[];if(v&&c.reduceRight===v){if(m)e=a.bind(e,m);return t?c.reduceRight(e,i):c.reduceRight(e)}var z=a.toArray(c).reverse();if(m&&!t)e=a.bind(e,m);return t?a.reduce(z,e,i,m):a.reduce(z,e)};
a.find=a.detect=function(c,e,i){var m;o(c,function(t,z,x){if(e.call(i,t,z,x)){m=t;return true}});return m};a.filter=a.select=function(c,e,i){var m=[];if(c==null)return m;if(C&&c.filter===C)return c.filter(e,i);j(c,function(t,z,x){if(e.call(i,t,z,x))m[m.length]=t});return m};a.reject=function(c,e,i){var m=[];if(c==null)return m;j(c,function(t,z,x){e.call(i,t,z,x)||(m[m.length]=t)});return m};a.every=a.all=function(c,e,i){var m=true;if(c==null)return m;if(D&&c.every===D)return c.every(e,i);j(c,function(t,
z,x){if(!(m=m&&e.call(i,t,z,x)))return k});return m};var o=a.some=a.any=function(c,e,i){e||(e=a.identity);var m=false;if(c==null)return m;if(B&&c.some===B)return c.some(e,i);j(c,function(t,z,x){if(m||(m=e.call(i,t,z,x)))return k});return!!m};a.include=a.contains=function(c,e){var i=false;if(c==null)return i;if(E&&c.indexOf===E)return c.indexOf(e)!=-1;return i=o(c,function(m){return m===e})};a.invoke=function(c,e){var i=l.call(arguments,2);return a.map(c,function(m){return(a.isFunction(e)?e||m:m[e]).apply(m,
i)})};a.pluck=function(c,e){return a.map(c,function(i){return i[e]})};a.max=function(c,e,i){if(!e&&a.isArray(c))return Math.max.apply(Math,c);if(!e&&a.isEmpty(c))return-Infinity;var m={computed:-Infinity};j(c,function(t,z,x){z=e?e.call(i,t,z,x):t;z>=m.computed&&(m={value:t,computed:z})});return m.value};a.min=function(c,e,i){if(!e&&a.isArray(c))return Math.min.apply(Math,c);if(!e&&a.isEmpty(c))return Infinity;var m={computed:Infinity};j(c,function(t,z,x){z=e?e.call(i,t,z,x):t;z<m.computed&&(m={value:t,
computed:z})});return m.value};a.shuffle=function(c){var e=[],i;j(c,function(m,t){if(t==0)e[0]=m;else{i=Math.floor(Math.random()*(t+1));e[t]=e[i];e[i]=m}});return e};a.sortBy=function(c,e,i){return a.pluck(a.map(c,function(m,t,z){return{value:m,criteria:e.call(i,m,t,z)}}).sort(function(m,t){m=m.criteria;t=t.criteria;return m<t?-1:m>t?1:0}),"value")};a.groupBy=function(c,e){var i={},m=a.isFunction(e)?e:function(t){return t[e]};j(c,function(t,z){z=m(t,z);(i[z]||(i[z]=[])).push(t)});return i};a.sortedIndex=
function(c,e,i){i||(i=a.identity);for(var m=0,t=c.length;m<t;){var z=m+t>>1;i(c[z])<i(e)?(m=z+1):(t=z)}return m};a.toArray=function(c){if(!c)return[];if(c.toArray)return c.toArray();if(a.isArray(c))return l.call(c);if(a.isArguments(c))return l.call(c);return a.values(c)};a.size=function(c){return a.toArray(c).length};a.first=a.head=function(c,e,i){return e!=null&&!i?l.call(c,0,e):c[0]};a.initial=function(c,e,i){return l.call(c,0,c.length-(e==null||i?1:e))};a.last=function(c,e,i){return e!=null&&!i?
l.call(c,Math.max(c.length-e,0)):c[c.length-1]};a.rest=a.tail=function(c,e,i){return l.call(c,e==null||i?1:e)};a.compact=function(c){return a.filter(c,function(e){return!!e})};a.flatten=function(c,e){return a.reduce(c,function(i,m){if(a.isArray(m))return i.concat(e?m:a.flatten(m));i[i.length]=m;return i},[])};a.without=function(c){return a.difference(c,l.call(arguments,1))};a.uniq=a.unique=function(c,e,i){i=i?a.map(c,i):c;var m=[];a.reduce(i,function(t,z,x){if(0==x||(e===true?a.last(t)!=z:!a.include(t,
z))){t[t.length]=z;m[m.length]=c[x]}return t},[]);return m};a.union=function(){return a.uniq(a.flatten(arguments,true))};a.intersection=a.intersect=function(c){var e=l.call(arguments,1);return a.filter(a.uniq(c),function(i){return a.every(e,function(m){return a.indexOf(m,i)>=0})})};a.difference=function(c){var e=a.flatten(l.call(arguments,1));return a.filter(c,function(i){return!a.include(e,i)})};a.zip=function(){for(var c=l.call(arguments),e=a.max(a.pluck(c,"length")),i=new Array(e),m=0;m<e;m++)i[m]=
a.pluck(c,""+m);return i};a.indexOf=function(c,e,i){if(c==null)return-1;var m;if(i){i=a.sortedIndex(c,e);return c[i]===e?i:-1}if(E&&c.indexOf===E)return c.indexOf(e);i=0;for(m=c.length;i<m;i++)if(i in c&&c[i]===e)return i;return-1};a.lastIndexOf=function(c,e){if(c==null)return-1;if(G&&c.lastIndexOf===G)return c.lastIndexOf(e);for(var i=c.length;i--;)if(i in c&&c[i]===e)return i;return-1};a.range=function(c,e,i){if(arguments.length<=1){e=c||0;c=0}i=arguments[2]||1;for(var m=Math.max(Math.ceil((e-c)/
i),0),t=0,z=new Array(m);t<m;){z[t++]=c;c+=i}return z};var s=function(){};a.bind=function(c,e){var i,m;if(c.bind===b&&b)return b.apply(c,l.call(arguments,1));if(!a.isFunction(c))throw new TypeError;m=l.call(arguments,2);return i=function(){if(!(this instanceof i))return c.apply(e,m.concat(l.call(arguments)));s.prototype=c.prototype;var t=new s,z=c.apply(t,m.concat(l.call(arguments)));if(Object(z)===z)return z;return t}};a.bindAll=function(c){var e=l.call(arguments,1);if(e.length==0)e=a.functions(c);
j(e,function(i){c[i]=a.bind(c[i],c)});return c};a.memoize=function(c,e){var i={};e||(e=a.identity);return function(){var m=e.apply(this,arguments);return a.has(i,m)?i[m]:(i[m]=c.apply(this,arguments))}};a.delay=function(c,e){var i=l.call(arguments,2);return setTimeout(function(){return c.apply(c,i)},e)};a.defer=function(c){return a.delay.apply(a,[c,1].concat(l.call(arguments,1)))};a.throttle=function(c,e){var i,m,t,z,x,F=a.debounce(function(){x=z=false},e);return function(){i=this;m=arguments;var K=
function(){t=null;x&&c.apply(i,m);F()};t||(t=setTimeout(K,e));if(z)x=true;else c.apply(i,m);F();z=true}};a.debounce=function(c,e){var i;return function(){var m=this,t=arguments;clearTimeout(i);i=setTimeout(function(){i=null;c.apply(m,t)},e)}};a.once=function(c){var e=false,i;return function(){if(e)return i;e=true;return i=c.apply(this,arguments)}};a.wrap=function(c,e){return function(){var i=[c].concat(l.call(arguments,0));return e.apply(this,i)}};a.compose=function(){var c=arguments;return function(){for(var e=
arguments,i=c.length-1;i>=0;i--)e=[c[i].apply(this,e)];return e[0]}};a.after=function(c,e){if(c<=0)return e();return function(){if(--c<1)return e.apply(this,arguments)}};a.keys=L||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var e=[];for(var i in c)if(a.has(c,i))e[e.length]=i;return e};a.values=function(c){return a.map(c,a.identity)};a.functions=a.methods=function(c){var e=[];for(var i in c)a.isFunction(c[i])&&e.push(i);return e.sort()};a.extend=function(c){j(l.call(arguments,
1),function(e){for(var i in e)c[i]=e[i]});return c};a.defaults=function(c){j(l.call(arguments,1),function(e){for(var i in e)if(c[i]==null)c[i]=e[i]});return c};a.clone=function(c){if(!a.isObject(c))return c;return a.isArray(c)?c.slice():a.extend({},c)};a.tap=function(c,e){e(c);return c};a.isEqual=function(c,e){return f(c,e,[])};a.isEmpty=function(c){if(a.isArray(c)||a.isString(c))return c.length===0;for(var e in c)if(a.has(c,e))return false;return true};a.isElement=function(c){return!!(c&&c.nodeType==
1)};a.isArray=h||function(c){return y.call(c)=="[object Array]"};a.isObject=function(c){return c===Object(c)};a.isArguments=function(c){return y.call(c)=="[object Arguments]"};if(!a.isArguments(arguments))a.isArguments=function(c){return!!(c&&a.has(c,"callee"))};a.isFunction=function(c){return y.call(c)=="[object Function]"};a.isString=function(c){return y.call(c)=="[object String]"};a.isNumber=function(c){return y.call(c)=="[object Number]"};a.isNaN=function(c){return c!==c};a.isBoolean=function(c){return c===
true||c===false||y.call(c)=="[object Boolean]"};a.isDate=function(c){return y.call(c)=="[object Date]"};a.isRegExp=function(c){return y.call(c)=="[object RegExp]"};a.isNull=function(c){return c===null};a.isUndefined=function(c){return c===void 0};a.has=function(c,e){return A.call(c,e)};a.noConflict=function(){n._=d;return this};a.identity=function(c){return c};a.times=function(c,e,i){for(var m=0;m<c;m++)e.call(i,m)};a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};a.mixin=function(c){j(a.functions(c),function(e){V(e,a[e]=c[e])})};var r=0;a.uniqueId=function(c){var e=r++;return c?c+e:e};a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/.^/,H=function(c){return c.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};a.template=function(c,e){var i=a.templateSettings;c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
c.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.escape||I,function(t,z){return"',_.escape("+H(z)+"),'"}).replace(i.interpolate||I,function(t,z){return"',"+H(z)+",'"}).replace(i.evaluate||I,function(t,z){return"');"+H(z).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var m=new Function("obj","_",c);if(e)return m(e,a);return function(t){return m.call(this,t,a)}};a.chain=function(c){return a(c).chain()};var J=function(c){this._wrapped=
c};a.prototype=J.prototype;var O=function(c,e){return e?a(c).chain():c},V=function(c,e){J.prototype[c]=function(){var i=l.call(arguments);q.call(i,this._wrapped);return O(e.apply(a,i),this._chain)}};a.mixin(a);j(["pop","push","reverse","shift","sort","splice","unshift"],function(c){var e=g[c];J.prototype[c]=function(){var i=this._wrapped;e.apply(i,arguments);var m=i.length;if((c=="shift"||c=="splice")&&m===0)delete i[0];return O(i,this._chain)}});j(["concat","join","slice"],function(c){var e=g[c];
J.prototype[c]=function(){return O(e.apply(this._wrapped,arguments),this._chain)}});J.prototype.chain=function(){this._chain=true;return this};J.prototype.value=function(){return this._wrapped}}).call(this);(function(){var f=this,n=f.Backbone,d=Array.prototype.slice,k=Array.prototype.splice,g;g=typeof exports!=="undefined"?exports:(f.Backbone={});g.VERSION="0.9.1";var h=f._;if(!h&&typeof require!=="undefined")h=require("underscore");var l=f.jQuery||f.Zepto||f.ender;g.setDomLibrary=function(b){l=b};g.noConflict=function(){f.Backbone=n;return this};g.emulateHTTP=false;g.emulateJSON=false;g.Events={on:function(b,a,j){var o;b=b.split(/\s+/);for(var s=this._callbacks||(this._callbacks={});o=b.shift();){o=
s[o]||(s[o]={});var r=o.tail||(o.tail=o.next={});r.callback=a;r.context=j;o.tail=r.next={}}return this},off:function(b,a,j){var o,s,r;if(b){if(s=this._callbacks)for(b=b.split(/\s+/);o=b.shift();){r=s[o];delete s[o];if(a&&r)for(;(r=r.next)&&r.next;)r.callback===a&&(!j||r.context===j)||this.on(o,r.callback,r.context)}}else delete this._callbacks;return this},trigger:function(b){var a,j,o,s;if(!(j=this._callbacks))return this;o=j.all;for((b=b.split(/\s+/)).push(null);a=b.shift();){o&&b.push({next:o.next,
tail:o.tail,event:a});if(a=j[a])b.push({next:a.next,tail:a.tail})}for(s=d.call(arguments,1);a=b.pop();){j=a.tail;for(o=a.event?[a.event].concat(s):s;(a=a.next)!==j;)a.callback.apply(a.context||this,o)}return this}};g.Events.bind=g.Events.on;g.Events.unbind=g.Events.off;g.Model=function(b,a){var j;b||(b={});if(a&&a.parse)b=this.parse(b);if(j=G(this,"defaults"))b=h.extend({},j,b);if(a&&a.collection)this.collection=a.collection;this.attributes={};this._escapedAttributes={};this.cid=h.uniqueId("c");if(!this.set(b,
{silent:true}))throw new Error("Can't create an invalid model");delete this._changed;this._previousAttributes=h.clone(this.attributes);this.initialize.apply(this,arguments)};h.extend(g.Model.prototype,g.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(b){return this.attributes[b]},escape:function(b){var a;if(a=this._escapedAttributes[b])return a;a=this.attributes[b];return this._escapedAttributes[b]=h.escape(a==null?"":""+a)},has:function(b){return this.attributes[b]!=
null},set:function(b,a,j){var o,s;if(h.isObject(b)||b==null){o=b;j=a}else{o={};o[b]=a}j||(j={});if(!o)return this;if(o instanceof g.Model)o=o.attributes;if(j.unset)for(s in o)o[s]=void 0;if(!this._validate(o,j))return false;if(this.idAttribute in o)this.id=o[this.idAttribute];a=this.attributes;var r=this._escapedAttributes,I=this._previousAttributes||{},H=this._setting;this._changed||(this._changed={});this._setting=true;for(s in o){b=o[s];h.isEqual(a[s],b)||delete r[s];j.unset?delete a[s]:(a[s]=
b);if(this._changing&&!h.isEqual(this._changed[s],b)){this.trigger("change:"+s,this,b,j);this._moreChanges=true}delete this._changed[s];if(!h.isEqual(I[s],b)||h.has(a,s)!=h.has(I,s))this._changed[s]=b}if(!H){!j.silent&&this.hasChanged()&&this.change(j);this._setting=false}return this},unset:function(b,a){(a||(a={})).unset=true;return this.set(b,null,a)},clear:function(b){(b||(b={})).unset=true;return this.set(h.clone(this.attributes),b)},fetch:function(b){b=b?h.clone(b):{};var a=this,j=b.success;
b.success=function(o,s,r){if(!a.set(a.parse(o,r),b))return false;j&&j(a,o)};b.error=g.wrapError(b.error,a,b);return(this.sync||g.sync).call(this,"read",this,b)},save:function(b,a,j){var o,s;if(h.isObject(b)||b==null){o=b;j=a}else{o={};o[b]=a}j=j?h.clone(j):{};if(j.wait)s=h.clone(this.attributes);b=h.extend({},j,{silent:true});if(o&&!this.set(o,j.wait?b:j))return false;var r=this,I=j.success;j.success=function(H,J,O){J=r.parse(H,O);if(j.wait)J=h.extend(o||{},J);if(!r.set(J,j))return false;I?I(r,H):
r.trigger("sync",r,H,j)};j.error=g.wrapError(j.error,r,j);a=this.isNew()?"create":"update";a=(this.sync||g.sync).call(this,a,this,j);j.wait&&this.set(s,b);return a},destroy:function(b){b=b?h.clone(b):{};var a=this,j=b.success,o=function(){a.trigger("destroy",a,a.collection,b)};if(this.isNew())return o();b.success=function(r){b.wait&&o();j?j(a,r):a.trigger("sync",a,r,b)};b.error=g.wrapError(b.error,a,b);var s=(this.sync||g.sync).call(this,"delete",this,b);b.wait||o();return s},url:function(){var b=
G(this.collection,"url")||G(this,"urlRoot")||L();if(this.isNew())return b;return b+(b.charAt(b.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(b){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(b){if(this._changing||!this.hasChanged())return this;this._moreChanges=this._changing=true;for(var a in this._changed)this.trigger("change:"+a,this,this._changed[a],b);for(;this._moreChanges;){this._moreChanges=
false;this.trigger("change",this,b)}this._previousAttributes=h.clone(this.attributes);delete this._changed;this._changing=false;return this},hasChanged:function(b){if(!arguments.length)return!h.isEmpty(this._changed);return this._changed&&h.has(this._changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?h.clone(this._changed):false;var a,j=false,o=this._previousAttributes;for(var s in b)if(!h.isEqual(o[s],a=b[s]))(j||(j={}))[s]=a;return j},previous:function(b){if(!arguments.length||
!this._previousAttributes)return null;return this._previousAttributes[b]},previousAttributes:function(){return h.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(b,a){if(a.silent||!this.validate)return true;b=h.extend({},this.attributes,b);b=this.validate(b,a);if(!b)return true;a&&a.error?a.error(this,b,a):this.trigger("error",this,b,a);return false}});g.Collection=function(b,a){a||(a={});if(a.comparator)this.comparator=a.comparator;this._reset();
this.initialize.apply(this,arguments);b&&this.reset(b,{silent:true,parse:a.parse})};h.extend(g.Collection.prototype,g.Events,{model:g.Model,initialize:function(){},toJSON:function(){return this.map(function(b){return b.toJSON()})},add:function(b,a){var j,o,s,r,I,H={},J={};a||(a={});b=h.isArray(b)?b.slice():[b];j=0;for(o=b.length;j<o;j++){if(!(s=b[j]=this._prepareModel(b[j],a)))throw new Error("Can't add an invalid model to a collection");if(H[r=s.cid]||this._byCid[r]||(I=s.id)!=null&&(J[I]||this._byId[I]))throw new Error("Can't add the same model to a collection twice");
H[r]=J[I]=s}for(j=0;j<o;j++){(s=b[j]).on("all",this._onModelEvent,this);this._byCid[s.cid]=s;if(s.id!=null)this._byId[s.id]=s}this.length+=o;k.apply(this.models,[a.at!=null?a.at:this.models.length,0].concat(b));this.comparator&&this.sort({silent:true});if(a.silent)return this;j=0;for(o=this.models.length;j<o;j++)if(H[(s=this.models[j]).cid]){a.index=j;s.trigger("add",s,this,a)}return this},remove:function(b,a){var j,o,s,r;a||(a={});b=h.isArray(b)?b.slice():[b];j=0;for(o=b.length;j<o;j++)if(r=this.getByCid(b[j])||
this.get(b[j])){delete this._byId[r.id];delete this._byCid[r.cid];s=this.indexOf(r);this.models.splice(s,1);this.length--;if(!a.silent){a.index=s;r.trigger("remove",r,this,a)}this._removeReference(r)}return this},get:function(b){if(b==null)return null;return this._byId[b.id!=null?b.id:b]},getByCid:function(b){return b&&this._byCid[b.cid||b]},at:function(b){return this.models[b]},sort:function(b){b||(b={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var a=h.bind(this.comparator,
this);if(this.comparator.length==1)this.models=this.sortBy(a);else this.models.sort(a);b.silent||this.trigger("reset",this,b);return this},pluck:function(b){return h.map(this.models,function(a){return a.get(b)})},reset:function(b,a){b||(b=[]);a||(a={});for(var j=0,o=this.models.length;j<o;j++)this._removeReference(this.models[j]);this._reset();this.add(b,{silent:true,parse:a.parse});a.silent||this.trigger("reset",this,a);return this},fetch:function(b){b=b?h.clone(b):{};if(b.parse===undefined)b.parse=
true;var a=this,j=b.success;b.success=function(o,s,r){a[b.add?"add":"reset"](a.parse(o,r),b);j&&j(a,o)};b.error=g.wrapError(b.error,a,b);return(this.sync||g.sync).call(this,"read",this,b)},create:function(b,a){var j=this;a=a?h.clone(a):{};b=this._prepareModel(b,a);if(!b)return false;a.wait||j.add(b,a);var o=a.success;a.success=function(s,r){a.wait&&j.add(s,a);o?o(s,r):s.trigger("sync",b,r,a)};b.save(null,a);return b},parse:function(b){return b},chain:function(){return h(this.models).chain()},_reset:function(){this.length=
0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(b,a){if(b instanceof g.Model){if(!b.collection)b.collection=this}else{b=b;a.collection=this;b=new this.model(b,a);b._validate(b.attributes,a)||(b=false)}return b},_removeReference:function(b){this==b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,a,j,o){if(!((b=="add"||b=="remove")&&j!=this)){b=="destroy"&&this.remove(a,o);if(a&&b==="change:"+a.idAttribute){delete this._byId[a.previous(a.idAttribute)];
this._byId[a.id]=a}this.trigger.apply(this,arguments)}}});h.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"],function(b){g.Collection.prototype[b]=function(){return h[b].apply(h,[this.models].concat(h.toArray(arguments)))}});g.Router=function(b){b||
(b={});if(b.routes)this.routes=b.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var q=/:\w+/g,y=/\*\w+/g,A=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(g.Router.prototype,g.Events,{initialize:function(){},route:function(b,a,j){g.history||(g.history=new g.History);h.isRegExp(b)||(b=this._routeToRegExp(b));j||(j=this[a]);g.history.route(b,h.bind(function(o){o=this._extractParameters(b,o);j&&j.apply(this,o);this.trigger.apply(this,["route:"+a].concat(o));g.history.trigger("route",this,a,o)},
this));return this},navigate:function(b,a){g.history.navigate(b,a)},_bindRoutes:function(){if(this.routes){var b=[];for(var a in this.routes)b.unshift([a,this.routes[a]]);a=0;for(var j=b.length;a<j;a++)this.route(b[a][0],b[a][1],this[b[a][1]])}},_routeToRegExp:function(b){b=b.replace(A,"\\$&").replace(q,"([^/]+)").replace(y,"(.*?)");return new RegExp("^"+b+"$")},_extractParameters:function(b,a){return b.exec(a).slice(1)}});g.History=function(){this.handlers=[];h.bindAll(this,"checkUrl")};var p=/^[#\/]/,
u=/msie [\w.]+/,w=false;h.extend(g.History.prototype,g.Events,{interval:50,getFragment:function(b,a){if(b==null)if(this._hasPushState||a){b=window.location.pathname;if(a=window.location.search)b+=a}else b=window.location.hash;b=decodeURIComponent(b);b.indexOf(this.options.root)||(b=b.substr(this.options.root.length));return b.replace(p,"")},start:function(b){if(w)throw new Error("Backbone.history has already been started");this.options=h.extend({},{root:"/"},this.options,b);this._wantsHashChange=
this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);b=this.getFragment();var a=document.documentMode;if(a=u.exec(navigator.userAgent.toLowerCase())&&(!a||a<=7)){this.iframe=l('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(b)}if(this._hasPushState)l(window).bind("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in
window&&!a)l(window).bind("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=b;w=true;b=window.location;a=b.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&a&&b.hash){this.fragment=b.hash.replace(p,
"");window.history.replaceState({},document.title,b.protocol+"//"+b.host+this.options.root+this.fragment)}if(!this.options.silent)return this.loadUrl()},stop:function(){l(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);w=false},route:function(b,a){this.handlers.unshift({route:b,callback:a})},checkUrl:function(){var b=this.getFragment();if(b==this.fragment&&this.iframe)b=this.getFragment(this.iframe.location.hash);if(b==this.fragment||
b==decodeURIComponent(this.fragment))return false;this.iframe&&this.navigate(b);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(b){var a=this.fragment=this.getFragment(b);return h.any(this.handlers,function(j){if(j.route.test(a)){j.callback(a);return true}})},navigate:function(b,a){if(!w)return false;if(!a||a===true)a={trigger:a};var j=(b||"").replace(p,"");if(!(this.fragment==j||this.fragment==decodeURIComponent(j))){if(this._hasPushState){if(j.indexOf(this.options.root)!=0)j=
this.options.root+j;this.fragment=j;window.history[a.replace?"replaceState":"pushState"]({},document.title,j)}else if(this._wantsHashChange){this.fragment=j;this._updateHash(window.location,j,a.replace);if(this.iframe&&j!=this.getFragment(this.iframe.location.hash)){a.replace||this.iframe.document.open().close();this._updateHash(this.iframe.location,j,a.replace)}}else window.location.assign(this.options.root+b);a.trigger&&this.loadUrl(b)}},_updateHash:function(b,a,j){if(j)b.replace(b.toString().replace(/(javascript:|#).*$/,
"")+"#"+a);else b.hash=a}});g.View=function(b){this.cid=h.uniqueId("view");this._configure(b||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName"];h.extend(g.View.prototype,g.Events,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(b,a,j){b=document.createElement(b);
a&&l(b).attr(a);j&&l(b).html(j);return b},setElement:function(b,a){this.$el=l(b);this.el=this.$el[0];a!==false&&this.delegateEvents();return this},delegateEvents:function(b){if(b||(b=G(this,"events"))){this.undelegateEvents();for(var a in b){var j=b[a];h.isFunction(j)||(j=this[b[a]]);if(!j)throw new Error('Event "'+b[a]+'" does not exist');var o=a.match(v),s=o[1];o=o[2];j=h.bind(j,this);s+=".delegateEvents"+this.cid;o===""?this.$el.bind(s,j):this.$el.delegate(o,s,j)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+
this.cid)},_configure:function(b){if(this.options)b=h.extend({},this.options,b);for(var a=0,j=C.length;a<j;a++){var o=C[a];if(b[o])this[o]=b[o]}this.options=b},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var b=G(this,"attributes")||{};if(this.id)b.id=this.id;if(this.className)b["class"]=this.className;this.setElement(this.make(this.tagName,b),false)}}});g.Model.extend=g.Collection.extend=g.Router.extend=g.View.extend=function(b,a){b=E(this,b,a);b.extend=this.extend;return b};
var D={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(b,a,j){var o=D[b],s={type:o,dataType:"json"};if(!j.url)s.url=G(a,"url")||L();if(!j.data&&a&&(b=="create"||b=="update")){s.contentType="application/json";s.data=JSON.stringify(a.toJSON())}if(g.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(g.emulateHTTP)if(o==="PUT"||o==="DELETE"){if(g.emulateJSON)s.data._method=o;s.type="POST";s.beforeSend=function(r){r.setRequestHeader("X-HTTP-Method-Override",
o)}}if(s.type!=="GET"&&!g.emulateJSON)s.processData=false;return l.ajax(h.extend(s,j))};g.wrapError=function(b,a,j){return function(o,s){s=o===a?s:o;b?b(a,s,j):a.trigger("error",a,s,j)}};var B=function(){},E=function(b,a,j){var o;o=a&&a.hasOwnProperty("constructor")?a.constructor:function(){b.apply(this,arguments)};h.extend(o,b);B.prototype=b.prototype;o.prototype=new B;a&&h.extend(o.prototype,a);j&&h.extend(o,j);o.prototype.constructor=o;o.__super__=b.prototype;return o},G=function(b,a){if(!(b&&
b[a]))return null;return h.isFunction(b[a])?b[a]():b[a]},L=function(){throw new Error('A "url" property or function must be specified');}}).call(this);if(!window.JSON)window.JSON={};
(function(){function f(p){return p<10?"0"+p:p}function n(p){h.lastIndex=0;return h.test(p)?'"'+p.replace(h,function(u){var w=y[u];return typeof w==="string"?w:"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+p+'"'}function d(p,u){var w,v,C=l,D,B=u[p];if(B&&typeof B==="object"&&typeof B.toJSON==="function")B=B.toJSON(p);if(typeof A==="function")B=A.call(u,p,B);switch(typeof B){case "string":return n(B);case "number":return isFinite(B)?String(B):"null";case "boolean":case "null":return String(B);
case "object":if(!B)return"null";l+=q;D=[];if(Object.prototype.toString.apply(B)==="[object Array]"){v=B.length;for(p=0;p<v;p+=1)D[p]=d(p,B)||"null";u=D.length===0?"[]":l?"[\n"+l+D.join(",\n"+l)+"\n"+C+"]":"["+D.join(",")+"]";l=C;return u}if(A&&typeof A==="object"){v=A.length;for(p=0;p<v;p+=1){w=A[p];if(typeof w==="string")if(u=d(w,B))D.push(n(w)+(l?": ":":")+u)}}else for(w in B)if(Object.hasOwnProperty.call(B,w))if(u=d(w,B))D.push(n(w)+(l?": ":":")+u);u=D.length===0?"{}":l?"{\n"+l+D.join(",\n"+l)+
"\n"+C+"}":"{"+D.join(",")+"}";l=C;return u}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var k=window.JSON,g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,q,y={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},A;if(typeof k.stringify!=="function")k.stringify=function(p,u,w){var v;q=l="";if(typeof w==="number")for(v=0;v<w;v+=1)q+=" ";else if(typeof w==="string")q=w;if((A=u)&&typeof u!=="function"&&(typeof u!=="object"||typeof u.length!=="number"))throw new Error("JSON.stringify");return d("",
{"":p})};if(typeof k.parse!=="function")k.parse=function(p,u){function w(v,C){var D,B,E=v[C];if(E&&typeof E==="object")for(D in E)if(Object.hasOwnProperty.call(E,D)){B=w(E,D);if(B!==undefined)E[D]=B;else delete E[D]}return u.call(v,C,E)}p=String(p);g.lastIndex=0;if(g.test(p))p=p.replace(g,function(v){return"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(p.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){p=eval("("+p+")");return typeof u==="function"?w({"":p},""):p}throw new SyntaxError("JSON.parse");}})();var Router=function(){var f;if(!window.history.pushState)return null;f=new Backbone.Router({routes:{"join/":"signup","join/signup/":"signup","join/register/":"signup","join/app/":"signup","join/app/signup/":"signup","join/app/register/":"signup","facebook/register/*path":"signup","twitter/*path":"signup","about/terms/":"terms","about/privacy/":"terms"}});Backbone.history.start({pushState:true,silent:true});return f}();var BoardLayout=function(){return{setup:function(f){if(!this.setupComplete){this.setupFlow();$(function(){if(window.userIsAuthenticated){Like.gridListeners();Follow.listeners();Comment.gridComment();Search.reportSearch();RepinDialog2.setup()}UserBlockReport.listeners();Zoom.setup()});this.center=!!f;this.setupComplete=true}},setupFlow:function(f){if(!this.flowSetupComplete){BoardLayout.allPins();f||$(window).resize(_.throttle(function(){BoardLayout.allPins()},200));this.flowSetupComplete=true}},pinsContainer:".BoardLayout",
pinArray:[],orderedPins:[],mappedPins:{},nextPin:function(f){f=this.orderedPins.indexOf(f)+1;if(f>=this.orderedPins.length)return 0;return this.orderedPins[f]},previousPin:function(f){f=this.orderedPins.indexOf(f)-1;if(f>=this.orderedPins.length)return 0;return this.orderedPins[f]},columnCount:4,columns:0,columnWidthInner:192,columnMargin:15,columnPadding:30,columnContainerWidth:0,allPins:function(){var f=$(this.pinsContainer+" .pin"),n=this.getContentArea();this.columnWidthOuter=this.columnWidthInner+
this.columnMargin+this.columnPadding;this.columns=Math.max(this.columnCount,parseInt(n/this.columnWidthOuter,10));if(f.length<this.columns)this.columns=Math.max(this.columnCount,f.length);n=this.columnWidthOuter*this.columns-this.columnMargin;var d=document.getElementById("wrapper"),k=$("#HiddenBoards #hiddenWrapper")[0];if(d)d.style.width=n+"px";if(k)k.style.width=n+"px";$(".LiquidContainer").css("width",n+"px");for(n=0;n<this.columns;n++)this.pinArray[n]=0;document.getElementById("SortableButtons")?
this.showPins():this.flowPins(f,true);if($("#ColumnContainer .pin").length===0&&window.location.pathname==="/"){$("#ColumnContainer").addClass("empty");setTimeout(function(){window.location.reload()},5E3)}},newPins:function(){var f=window.jQuery?":last":":last-of-type",n=$(this.pinsContainer+f+" .pin");n=n.length>0?n:$(this.pinsContainer+f+" .pin");this.flowPins(n)},flowPins:function(f,n){if(n){this.mappedPins={};this.orderedPins=[]}if(this.pinArray.length>this.columns)this.pinArray=this.pinArray.slice(0,
this.columns);for(n=0;n<f.length;n++)this.positionPin(f[n]);this.updateContainerHeight();this.showPins();window.useLazyLoad&&LazyLoad.invalidate()},positionPin:function(f){var n=$(f).attr("data-id");if(n&&this.mappedPins[n])$(f).remove();else{var d=$(f).attr("data-force-col")?$(f).attr("data-force-col"):_.indexOf(this.pinArray,Math.min.apply(Math,this.pinArray));this.addPinToColumn(f,d);this.mappedPins[n]=this.orderedPins.length;this.orderedPins.push(n)}},addPinToColumn:function(f,n){var d=this.pinArray[n];
f.style.top=d+"px";f.style.left=n*this.columnWidthOuter+"px";f.setAttribute("data-col",n);this.pinArray[n]=d+f.offsetHeight+this.columnMargin},flowFirstColumn:function(){this.pinArray[0]=0;$('.pin[data-col="0"]').each(function(f,n){BoardLayout.addPinToColumn(n,0)})},showPins:function(){$.browser.msie&&parseInt($.browser.version,10)==7||$(this.pinsContainer).css("opacity",1);var f=$(this.pinsContainer);setTimeout(function(){f.css({visibility:"visible"})},200)},imageLoaded:function(){$(this).removeClass("lazy")},
getContentArea:function(){return this.contentArea||document.documentElement.clientWidth},updateContainerHeight:function(){$("#ColumnContainer").height(Math.max.apply(Math,this.pinArray))}}}();var window_lib=window.jQuery?jQuery:Zepto;
(function(f){f.fn.passStrength=function(n,d,k,g){return this.each(function(){var h=f(this);f(h).unbind().bind("keyup blur",function(){if(f(this).val()!==null){var l=f.fn.teststrength(f(this).val(),g,k);if(l[2]){n.attr("disabled","disabled");n.addClass("disabled")}else{n.removeAttr("disabled");n.removeClass("disabled")}d.html(l[0]);d.removeClass(g.badPassStyle);d.removeClass(g.goodPassStyle);d.removeClass(g.strongPassStyle);d.addClass(l[1])}})})};f.fn.teststrength=function(n,d,k){var g=0;if(n.length<
6)return[d.shortPassStr,d.badPassStyle,1];if(d.userid.length>0&&n.toLowerCase()==d.userid.toLowerCase())return[d.samePasswordStr,d.badPassStyle,1];if(f.inArray(n.toLowerCase(),k)>-1)return[d.blackPassStr,d.badPassStyle,1];g+=n.length*2;g+=f.fn.uniqueCharacters(n)*3;if(n.match(/(.*[0-9].*[0-9].*[0-9])/))g+=15;if(n.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/))g+=15;if(n.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/))g+=10;if(n.match(/([a-zA-Z])/)&&n.match(/([0-9])/))g+=15;if(n.match(/([!,@,#,$,%,\^,&,*,?,_,~])/)&&
n.match(/([0-9])/))g+=15;if(n.match(/([!,@,#,$,%,\^,&,*,?,_,~])/)&&n.match(/([a-zA-Z])/))g+=15;if(n.match(/^[a-z]+$/)||n.match(/^[A-Z]+$/)||n.match(/^\d+$/))g-=10;if(g<34)return[d.badPassStr,d.badPassStyle,0];if(g<68)return[d.goodPassStr,d.goodPassStyle,0];return[d.strongPassStr,d.strongPassStyle,0]}})(window_lib);$.fn.uniqueCharacters=function(f){for(var n={},d=0,k=0;k<f.length;k++)if(!(f.charAt(k)in n)){n[f.charAt(k)]=true;d++}return d};var FancySelect=function(){return{setup:function(f,n,d,k){function g(){y.hide();$("body").off("click.FancySelect")}function h(){if(!y.is(":visible")){y.show();window.setTimeout(function(){$("body").on("click.FancySelect",function(){g()})},1)}}function l(v){v=v.find(".primaryText").text()||v.text();p.text(v)}var q=$('<div class="FancySelect"><div class="current"><span class="CurrentSelection"></span><span class="DownArrow"></span></div><div class="FancySelectList"><div class="wrapper"><ul></ul></div></div></div>'),
y=$(".FancySelectList",q),A=$("ul",y),p=$(".CurrentSelection",q),u="",w;f=$(f);w=f.prop("selectedIndex");n=n||function(){var v=$(this).val();if(k){var C=$(this).text().split(k),D=C[0];C=C[1];return'<li data="'+v+'"><span class="primaryText">'+D+"</span>"+(C?' <span class="subtext">'+C+"</span>":"")+"</li>"}else{D=$(this).text();return'<li data="'+v+'"><span>'+D+"</span></li>"}};$("option",f).each(function(v){u+=n.call(this,v,v===w)});A.html(u);l(A.find("li").eq(w));f.before(q);f.hide();q.click(function(){h()});
A.on("click","li",function(){var v=$(this).prevAll().length;f.prop("selectedIndex",v);l($(this));g();d&&d($(this).attr("data"));return false})}}}();function validate_email(f){return/^[^\s\n@]*[^\s\n\.@]\@[^\s\n\.@][^\s\n@]*(?=\.[^\s\.\n @]+$)\.[^\s\.\n @]+$/.test(f)}window.P=window.P||{};P.Registration={};
P.Registration.setup=function(f,n,d,k,g,h,l){function q(p,u){p.on("keyup blur",function(w){var v=$(this);if(w.type==="blur"||v.data("has-blurred")){u.call(this,w);v.data("has-blurred",true)}})}var y=$(".required",f);q($("input",n),function(){var p=$(this).val();if(p.length<3){n.addClass("BoardError");p=n.data("validation-short");$(l,n).html(p)}else if(p.length>15){n.addClass("BoardError");p=n.data("validation-long");$(l,n).html(p)}else{n.removeClass("BoardError");$(l,n).html("");$.ajax({type:"GET",
url:"/check_username/",dataType:"json",data:"check_username="+escape(p)+"&csrfmiddlewaretoken="+$("input[name=csrfmiddlewaretoken]").val(),success:function(u){if(u.status=="success"){n.removeClass("BoardError");$(l,n).html("")}else{n.addClass("BoardError");$(l,n).html(u.message)}A()}})}});q($("input",d),function(p){var u=$(this).val();if(p.type==="blur"||validate_email(u))$.ajax({type:"GET",url:"/check_username/",dataType:"json",data:"check_email="+encodeURIComponent(u)+"&csrfmiddlewaretoken="+$("input[name=csrfmiddlewaretoken]").val(),
success:function(w){if(w.status=="success"){d.removeClass("BoardError");$(l,d).html("")}else{d.addClass("BoardError");$(l,d).html(w.message)}A()}});else{d.removeClass("BoardError");$(l,d).empty()}});q($("input[type=password]",k),function(){var p=$(this).val();p=$.fn.teststrength(p,passStrengthOpts,weakPasswords);if(p[1]==passStrengthOpts.badPassStyle){k.addClass("BoardError");$(l,k).html(p[0])}else{k.removeClass("BoardError");$(l,k).html("")}});g.each(function(p,u){var w=$(u);q($("input",u).eq(0),
function(){var v=$(this).val();if(!v||v.length==0){w.addClass("BoardError");v=w.data("error");$(l,u).html(v)}else{w.removeClass("BoardError");$(l,u).html("")}})});$("input",y).on("keyup",function(){A()});$("input[type=checkbox]",y).on("change",function(){A()});var A=function(){var p=false;y.each(function(){var u=$("input",this),w=$(this).hasClass("BoardError");u=u.is("[type=checkbox]")?u.is(":checked"):u.val().length;if(w||!u){p=true;return false}});p?h.addClass("disabled"):h.removeClass("disabled")};
$("body").hasClass("mobile")||FancySelect.setup("#id_gender",null,null,true);f.submit(function(){var p;A();if(h.hasClass("disabled"))return false;h.addClass("disabled");p=$("#id_registration_type").val()||"unknown";trackGAEvent("signup","post",p);window.setTimeout(function(){f[0].submit()},150);return false})};$(function(){function f(){$("img",d).attr("src",n.val())}var n=$("#id_user_image_url"),d=$("#CompletePhoto"),k=$(".RegisterForm"),g=$(".upload",d);$("#id_img").on("change",function(){var h=$(this).val(),l;if(!n.val()&&(!h||h.length==0))f();else{k.ajaxSubmit({dataType:"json",iframe:true,url:"/register/profile_photo/",success:function(q){var y=function(){g.text(l).removeClass("disabled")},A;if(q.status=="success"){A=q.image_url;n.val(A);q=new Image;q.onload=function(){f();y()};q.onerror=function(){y()};
q.src=A}else y()}});l=g.text();g.text(g.data("text-uploading")).addClass("disabled")}});$.browser.mozilla&&g.on("click",function(){$("#id_img").click()});f()});function ShowError(f,n){var d=$("#ErrorDialog");if(d.length&&f){$(".message",d).html(f);$(".closeButton",d).click(function(){Modal.close("ErrorDialog");n&&n();return false});Modal.show("ErrorDialog")}}
function ShowConfirmation(f,n){var d=$("#ConfirmationDialog"),k=function(g){$(".confOkButton2").addClass("hidden");Modal.close(g)};if(d.length&&f){$(".message",d).html(f);n.header&&$("h2",d).html(n.header);n.okText&&$(".confOkButton",d).html(n.okText);if(n.okText2){$(".confOkButton2").removeClass("hidden");$(".confOkButton2",d).html(n.okText2)}n.cancelText&&$(".confCloseButton",d).html(n.cancelText);$(".closeButton",d).click(function(){k("ConfirmationDialog");return false});$(".okButton",d).click(function(){var g=
$(this).hasClass("confOkButton");k("ConfirmationDialog");n.successFn&&n.successFn(g);return false});Modal.show("ConfirmationDialog")}};(function(){var f,n=navigator&&navigator.userAgent.match(/android/i)!==null;if(!window.P)window.P={};f=window.P;f.ParalaxHeader=function(d,k){$(function(){var g=$(d),h=g.height(),l=function(q){g.css({top:"-"+q+"px"})};if(window.Touch&&g[0].style.webkitTransform!==undefined)l=function(q){g.each(function(){this.style.webkitTransform="translate3d(0, -"+q+"px, 0)"})};$(window).on("scroll",function(){var q=Math.round(window.pageYOffset*k);q<h&&l(q)})})};"ontouchstart"in window&&$(function(){var d=0,k=
function(){if(window.pageYOffset!==d){d=window.pageYOffset;$(window).trigger("scroll",{})}};window.addEventListener("touchstart",k);window.addEventListener("touchmove",k);window.addEventListener("orientationchange",function(){$("body").css({zoom:"1.1"}).offset();$("body").css({zoom:"1"})},false)});f.PinsView=function(d){this.$el=$(d);this.pins=[];this.indexes={};this.lastIndex=0;this.liked={};this.initialize()};f.PinsView.prototype=_.extend({initialize:function(){this.addPins();this.addListeners();
this.containerTop=this.$el.offset().top},addPins:function(){var d=this;this.$el.find(".pin").each(function(){var k=$(this),g=k.find("img"),h=k.attr("data-id"),l=parseInt(g.attr("width"),10),q=parseInt(g.attr("height"),10);g=g.attr("src");d.pins.push({id:h,width:l,height:q,src:g,el:k});d.indexes[h]=d.pins[d.pins.length-1];d.lastIndex++;d.lastPosition=parseInt(k.css("top")||0,10)})},addListeners:function(){var d=this;$(window).on("scroll",function(){var k=$(window),g=f.windowTop();if(g){k=g+k.height();
g=k-((d.lastPosition||0)+d.containerTop);if(!n||d.pins.length<250)g>-100&&d.populate(k)}});f.click(this.$el,function(k){k=$(k.target).parents(".pin");var g=k.attr("data-id"),h=k.hasClass("like");if(!g)return false;if(h)d.unlike(g);else{d.like(g);d.drop()}d.trigger("pinClick",k,h);k.toggleClass("like")})},add:function(d){var k=this;_.each(_.isArray(d)?d:[d],function(g,h){k.pins.push(g);k.indexes[g.id]=g;h%2===0&&k.preload(g.src)})},like:function(d){this.liked[d]=1},unlike:function(d){delete this.liked[d]},
getLikes:function(){return _.keys(this.liked)},drop:function(){this.pins=this.pins.slice(0,this.lastIndex)},populate:function(d){var k=this,g=0;this.ensurePins(function(h){for(;h.length;){for(var l=0,q=BoardLayout.pinArray.length;l<q;l++)if(h.length)g=Math.max(g,k.createPin(h.pop()));if(g>d)break}BoardLayout.updateContainerHeight();k.lastPosition=g})},ensurePins:function(d){var k=this;if(this.lastIndex<this.pins.length-1)d(this.pins.slice(this.lastIndex+1));else if(!this.fetching){this.fetching=true;
$.ajax({url:window.location.pathname,data:{liked:this.getLikes().slice(-10).join(","),format:"json",num:30,_:(new Date).getTime()},dataType:"json",success:function(g){k.add(g);k.fetching=false;d(g)},error:function(){k.fetching=false}})}},createPin:function(d){var k="<div class='pin simple' data-id='"+d.id+"'><div class='edge'></div><img src='"+d.src+"' width='"+this.pinWidth()+"' height='"+this.pinHeight(d.height)+"' class='PinImageImg' style='opacity:0' onload='this.style.opacity=1'></div>";d.el=
$(k);this.$el.append(d.el);this.lastIndex++;BoardLayout.positionPin(d.el[0]);return parseInt(d.el.css("top")||0,10)},pinWidth:function(){return BoardLayout.columnWidthInner},pinHeight:function(d){return BoardLayout.columnWidthInner!==192?Math.round(d/2):d},preload:function(d){(new Image).src=d}},Backbone.Events);f.click=function(d,k){d.on(window.Zepto?"tap":"click",k)};f.windowTop=function(d){_.isUndefined(d)||window.scrollTo(0,d);return _.isUndefined(window.pageYOffset)?$(window).scrollTop():window.pageYOffset};
f.Join={};f.Join.PinSelector=function(){var d,k,g,h,l,q,y;return{hide:function(){k.animate({opacity:0},400,null,function(){k.hide()})},setup:function(A){A=this.config=_.extend({requiredLikes:5,pinsUrl:"/join/",suggestedUrl:"/join/suggested/"},A||{});q=A.suggestedUrl;$(document).ready(function(){var p=function(w){if(w.persisted){f.Join.PinSelector.show();d.removeClass("disabled")}},u=function(){var w=$(window).width();BoardLayout.pinsContainer=".page";BoardLayout.columnCount=3;BoardLayout.columnPadding=
0;if(y){BoardLayout.contentArea=302;BoardLayout.columnWidthInner=96;BoardLayout.columnMargin=7}else if(w<=620){BoardLayout.columnCount=2;BoardLayout.contentArea=414;BoardLayout.columnMargin=15;l=false}else{BoardLayout.contentArea=606;BoardLayout.columnMargin=15;l=true}};y=$("body").hasClass("mobile");u();$(window).resize(_.throttle(function(){var w=l;u();l!==w&&BoardLayout.allPins()},200));$(window);k=$("#PinSelector");d=$(".FooterBar .next",k);g=$("#ColumnContainer");$(".FooterBar .helper",k);BoardLayout.setupFlow(true);
h=f.Pins=new f.PinsView(g);h.populate();h.on("pinClick",function(){var w=h.getLikes();w.length>=A.requiredLikes?k.addClass("ready"):k.removeClass("ready");$(".FooterBar .progress span",k).each(function(v){v=h.indexes[w[v]];var C,D;if(v){v=v.src;C=$("img",this).attr("src");D=v.replace(/_(b|c)\.jpg$/,"_t.jpg");C!==D&&C!==v&&$(this).html('<img src="'+D+'" onload="this.style.opacity=1">').addClass("active")}else $(this).empty().removeClass("active")})});f.click(d,function(){var w=function(){$("body").removeClass("ajax").addClass("loaded");
d.removeClass("disabled")},v={};if(d.hasClass("disabled"))return false;d.addClass("disabled");$("body").addClass("ajax").removeClass("loaded");f.Join.PinSelector.hide();v.liked=h.getLikes().slice(-10).join(",");if($("body").hasClass("mobile"))v.num_big_boards=1;$.ajax({url:q,data:v,dataType:"html",success:function(C){if(A.skipBoards)window.location=A.signupUrl;else{var D=f.Join.AutoFollowed;D.setBoards(C);D.show();w()}},error:function(){w()}});return false});navigator.userAgent.match(/chrome/i)===
null&&navigator.userAgent.match(/safari/i)!==null&&window.addEventListener("pageshow",p,false)})},show:function(){k.css({display:"block",opacity:0});k.animate({opacity:1});f.windowTop(0)}}}();f.Join.AutoFollowed=function(){var d,k;return{hide:function(){k.hide()},setup:function(g){g=$.extend({signupUrl:"/join/signup/"},g||{});d=g.signupUrl;$(document).ready(function(){var h,l;$(window);k=$("#AutoFollowed");h=$(".FooterBar .prev",k);l=$(".FooterBar .next",k);f.click(h,function(){f.Join.AutoFollowed.hide();
f.Join.PinSelector.show()});f.click(l,function(){window.location=d})})},setBoards:function(g){var h=$(".boards",k);h.length?h.replaceWith(g):$(".header",k).after(g)},show:function(){k.css({display:"block",opacity:0});k.animate({opacity:1});f.windowTop(0)}}}();f.Join.Terms=function(){var d,k,g,h,l,q;return{close:function(y){if(l){h.children().css("display","");f.windowTop(0)}q&&!y&&window.history.back();d.removeClass("visible").hide()},show:function(){if(l){h.children().css("display","none");f.windowTop(0)}d.addClass("visible").show()},
setup:function(){d=$("#TermsDialog");h=$("body");h.append(d);l=h.hasClass("mobile");q=!!window.Router;k=$(".body",d);g=$(".header h2",d);if(q){Router.on("route:signup",function(){d&&d.css("display")=="block"&&f.Join.Terms.close(true)});Router.on("route:terms",function(){d&&d.css("display")=="none"&&f.Join.Terms.show()})}$(".close",d).click(function(y){f.Join.Terms.close();y.preventDefault()});k.click(function(y){y.preventDefault()});$(".terms").click(function(y){var A=$(y.target),p=A.attr("href");
if(p){$.ajax({url:p,success:function(u){k.html(u);g.text(A.text());q&&Router.navigate(p);f.Join.Terms.show()},error:function(){}});y.preventDefault()}})}}}();f.Mobile=function(){return{call:function(d,k,g){k=k||{callback:"P.Mobile"};if(g){var h=d+"Complete";k.callback="P.Mobile."+h;this.on(h,g)}k=$.param(k);if(window.PinterestAndroid)try{PinterestAndroid[d](k)}catch(l){$("body").hide()}else window.location="pinterest://"+d+"?"+k},on:function(d,k){this[d]=k}}}();f.WarmRegistration=function(){$.ajax({url:"/join/register/warm/"})};
$(function(){$("form").on("submit",function(){$(".Button",this).addClass("disabled")})})})();window.main&&window.main();
